const i={container:null,imgList:[],controls:{next:!1,prev:!1,navigation:!1},autoPlay:!0,style:{boxSizing:"border-box",border:"1px solid gray",borderRadius:"12px"},gap:0,slidePerPage:1},r=t=>t*parseFloat(getComputedStyle(document.documentElement).fontSize);var t=new class{constructor(){this.dragStartX=0,this.touches=[0,0],this.resizeTimeout=null,this.slides=[],this.changedCB=()=>{}}init(t){t={...i,...t,controls:{...i.controls,...t.controls},style:{...i.style,...t.style,display:"flex",overflow:"hidden"}};if(this.setOptions(t),null==t.container)console.error('SimpleSliderJS : "container" option is needed and have to be html element');else{var{imgList:e,itemList:s}=t;if(typeof e==typeof[]&&0!==e.length||typeof s==typeof[]&&0!==s.length&&typeof s[0]==typeof document.createElement("div")||0!==t.container.childElementCount)return this.setStyles(),t.noControl||this.createControls(),t.createCustomControls&&this.createCustomControls(),this.createImages(e,s),this.slideCount=this.slides.length,this.setActiveSlide(0),this.autoPlay(),this.root.addEventListener("touchstart",this.touchStartHandler),this.root.addEventListener("touchend",this.touchEndHandler),this.root.addEventListener("touchmove",this.touchMoveHandler),this.root.addEventListener("touchleave",this.touchLeaveHandler),this.root.addEventListener("touchcancel",this.touchCancelHandler),window.addEventListener("resize",t=>{this.root.style.opacity=.1,clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.setActiveSlide(0),this.root.style.opacity=1},80)}),this.root.simpleSlider=this;console.error('SimpleSliderJS : "imgList" option does not contain any url (need to be array of strings). Also itemList option does not contain any element (need to be array of elements)')}}setOptions(t){this.options=t,this.root=t.container,this.currentSlide=0}createImages(t,e){if(!t||0===t.length)return this.appendItemsToList(e);this.slides.forEach(t=>t.remove());const o=sthis.options.slidePerPage;t.forEach((t,e)=>{var s=document.createElement("div"),i=(s.style.transition="all 400ms",o&&1<o?s.style.width=100/o+"%":s.style.minWidth="100%",s.style.display="flex",s.style.position="relative",s.style.alignItems="center",s.style.justifyContent="center",s.style.overflow="hidden",document.createElement("img"));i.src=t,i.draggable=!1,s.append(i),this.root.append(s)}),this.slides=Array.from(this.root.querySelectorAll('div:not([data-type="control"])'))}appendItemsToList(t){if(!t||0===t.length)return this.useRootSChilds();this.slides.forEach(t=>t.remove());const i=sthis.options.slidePerPage;let o=0;"string"==typeof this.options.gap?o=this.options.gap.includes("rem")?r(parseFloat(this.options.gap)):0:"number"==typeof this.options.gap&&(o=this.options.gap),t.forEach((t,e)=>{var s=document.createElement("div");s.style.transition="all 400ms",i&&1<i?s.style.maxWidth=`calc(${100/i}% - ${o*i}px)`:s.style.minWidth="100%",s.style.display="flex",s.style.position="relative",s.style.alignItems="center",s.style.justifyContent="center",s.style.overflow="hidden";try{t.draggable=!1}catch(t){}s.append(t),this.root.append(s)}),this.slides=Array.from(this.root.querySelectorAll('div:not([data-type="control"])'))}useRootSChilds(){const i=[],o=this.options.slidePerPage;let l=0;"string"==typeof this.options.gap&&1!==o?l=this.options.gap.includes("rem")?r(parseFloat(this.options.gap)):0:"number"==typeof this.options.gap&&1!==o&&(l=this.options.gap),console.log(this);Array.from(this.root.children).filter(t=>"control"!==t.getAttribute("data-type")).forEach((t,e)=>{var s=document.createElement("div");s.style.transition="all 400ms",s.style.minWidth=`calc(${100/o}% - ${2*l}px)`,s.style.margin=`0 ${2*l}px 0 0`,s.style.width="100%",s.style.display="flex",s.style.position="relative",s.style.alignItems="center",s.style.justifyContent="center",s.style.overflow="hidden";try{t.draggable=!1}catch(t){}s.append(t),i.push(s),this.root.append(s)}),this.slides=i,this.root.style.paddingLeft=2*l+"px"}createControls(){var t=document.createElement("div"),e=(t.setAttribute("data-type","control"),t.style.zIndex="2",t.innerHTML="&#8249;",t.style.width="4rem",t.style.height="4rem",t.style.color="skyblue",t.style.borderRadius="100%",t.style.position="absolute",t.style.fontSize="3rem",t.style.top="50%",t.style.transform="translateY(-50%)",t.style.left="0",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.cursor="pointer",t.style.userSelect="none",t.onclick=()=>this.goToSlide("<"),document.createElement("div"));e.setAttribute("data-type","control"),e.style.zIndex="2",e.innerHTML="&#8250;",e.style.width="4rem",e.style.height="4rem",e.style.color="skyblue",e.style.borderRadius="100%",e.style.position="absolute",e.style.fontSize="3rem",e.style.top="50%",e.style.transform="translateY(-50%)",e.style.right="0",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.cursor="pointer",e.style.userSelect="none",e.onclick=()=>this.goToSlide(">");const i=document.createElement("div");i.setAttribute("data-type","control"),i.style.zIndex="2",i.style.padding="10px",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="space-between",i.style.position="absolute",i.style.left="50%",i.style.bottom="0",i.style.transform="translateX(-50%)",i.style.userSelect="none",this.options.imgList.forEach((t,e)=>{var s=document.createElement("span");s.style.width="20px",s.style.height="20px",s.style.margin="5px",s.style.borderRadius="100%",s.style.background="#FFFFFF50",s.style.cursor="pointer",s.onclick=()=>{this.goToSlide(e)},i.appendChild(s)}),this.navigation=i.children,this.root.append(t,e,i)}createCustomControls(){var{next:t,prev:e,navigation:s}=this.options["controls"];e.setAttribute("data-type","control"),e.onclick=()=>this.goToSlide("<"),t.setAttribute("data-type","control"),t.onclick=()=>this.goToSlide(">"),s.setAttribute("data-type","control"),this.root.append(e,t,s)}goToSlide(t,e="userClick"){var s=this.options.slidePerPage;"<"===t?0<this.currentSlide?this.setActiveSlide(-1*s):(this.currentSlide=this.slideCount,this.goToSlide("<",e)):">"===t?this.currentSlide<this.slideCount-s?this.setActiveSlide():(this.currentSlide=-1,this.goToSlide(">",e)):(this.currentSlide=parseInt(t),this.setActiveSlide(0,"userClick"===e)),"userClick"===e&&this.autoPlay()}setActiveNavItem(){this.navigation&&this.options.noControl&&(Array.from(this.navigation).forEach(t=>{t.style.background="#FFFFFF50"}),this.navigation[this.currentSlide].style.background="#FFFFFF90")}setActiveSlide(s=1,t=!1){var e=this.currentSlide,i=this["slides"];const o=i[0].getBoundingClientRect().width;var l=this.options.slidePerPage;let n=0;"string"==typeof this.options.gap&&1!==l?n=this.options.gap.includes("rem")?r(parseFloat(this.options.gap)):0:"number"==typeof this.options.gap&&1!==l&&(n=this.options.gap),i.forEach((t,e)=>{t.style.transform=`translateX(-${(o+2*n)*(this.currentSlide+s)}px)`}),this.currentSlide+=s,this.currentSlide===e&&!t||this.changedCB(this.currentSlide),this.setActiveNavItem()}on(t,e){this[t+"CB"]=e}autoPlay(){var t=this["options"];!0===t.autoPlay&&(this.autoPlayInterval&&clearInterval(this.autoPlayInterval),this.autoPlayInterval=setInterval(()=>{this.goToSlide(">","autoPlay")},t.autoPlayDuration||4e3))}touchStartHandler(t){this.simpleSlider.touches[0]=t.touches[0].screenX}touchMoveHandler(t){this.simpleSlider.touches[1]=t.touches[t.touches.length-1].screenX}touchEndHandler(){var t=this["simpleSlider"],e=t.touches[0],s=t.touches[1];0===e||0===s||Math.abs(s-e)<50||(e<s&&t.goToSlide("<"),s<e&&t.goToSlide(">"),t.resetTouches())}resetTouches(){this.touches=[0,0]}setStyles(){const e=this["root"],s=this.options.style;Object.keys(s).forEach(t=>{e.style[t]=s[t]}),e.style.position="relative",e.style.overflow="hidden";let t=0;"string"==typeof this.options.gap?t=this.options.gap.includes("rem")?r(parseFloat(this.options.gap)):0:"number"==typeof this.options.gap&&(t=this.options.gap)}getActiveSlide(){return this.currentSlide}};export{t as simpleSlider};